<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
	$(document).ready(function (){
		$("#loginBtn").click(function(){
			$.post("main",
			JSON.stringify({ // javascript를 json으로 변환
				sign:"login",
				id:$("#id").val(),
				pw:$("#pw").val()
			}),
			function(msg, status){
				var obj=JSON.parse(msg); //json을 javascript로 변환
				$("#msgDiv").html(obj.id+"님 환영합니다.");
			});
		});
	});
	
	/*
	function fn_process(){
		var id=$("#id").val();
		var pw=$("#pw").val();
		var jsObject={
				sign:"login",
				id:id,
				pw:pw
		};
		var _jsonInfo = JSON.stringify(jsObject);
		//var _jsonInfo = '{"sign":"login", "id":"'+id+'", "pw":"'+pw+'"}';
		//서버쪽으로 비동기 호출(async: false면 동기)
		$.ajax({
			type: "post",
			dataType: "json",
			async: true,
			url: "main",
			data: {jsonInfo:_jsonInfo},
			//data: {sign:"login", id:id, pw:pw},
			success: function(msg, status){
				//console.log(msg);
				//console.log(typeof(msg));
				$("#msgDiv").html(msg.id+"님 환영합니다.");
				*/
				/*
				var v1 = "<h1>";
				$(msg).find("id").each(function(){
					v1 += $(this).find("name").text();
				});
				v1 += "</h1>"
				$("#msgDiv").html(v1);
				*/
				//alert("success: "+msg+"\t status: "+status);
				/*
			},
			error: function(msg, status){
				alert("error: "+msg+"\t status: "+status);
			},
			complete: function(){
				alert("작업을 완료했습니다.");
			}
		});
	}
	*/
</script>
</head>
<body>
	<!-- form 태그는 전부 동기 -->
<!-- <form action='main'> -->
<!-- 	<input type='hidden' name='sign' value='login'> -->
		ID <input name='id' id='id'><br>
		PW <input type='password' name='pw' id='pw'><br>
		<input type='button' value='로그인' id='loginBtn'>
		<!-- <input type='button' value='로그인' onClick='fn_process()'> -->
		
		<div id='msgDiv'></div>
<!-- </form> -->
</body>
</html>